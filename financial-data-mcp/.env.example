# Finnhub API Key (get free key at: https://finnhub.io/register)
# For multiple keys, use comma-separated format: key1,key2,key3
# When multiple keys are provided, key rotation is automatically enabled
FINNHUB_API_KEY=your_finnhub_api_key_here

# Alpha Vantage API Key (get free key at: https://www.alphavantage.co/support/#api-key)
# For multiple keys, use comma-separated format: key1,key2,key3
# When multiple keys are provided, key rotation is automatically enabled
ALPHAVANTAGE_API_KEY=your_alpha_vantage_api_key_here

# TwelveData API Key (get free key at: https://twelvedata.com/pricing)
# For multiple keys, use comma-separated format: key1,key2,key3
# When multiple keys are provided, key rotation is automatically enabled
TWELVEDATA_API_KEY=your_twelvedata_api_key_here

# Tiingo API Key (get free key at: https://www.tiingo.com/account/api/token)
# For multiple keys, use comma-separated format: key1,key2,key3
# When multiple keys are provided, key rotation is automatically enabled
TIINGO_API_KEY=your_tiingo_api_key_here

# Log Level Configuration
# Available levels: DEBUG, INFO, WARN, ERROR
# DEBUG level enables detailed request/response logging for troubleshooting
LOG_LEVEL=INFO

# API Failover Configuration
API_FAILOVER_ENABLED=false
PRIMARY_API_SOURCE=finnhub
SECONDARY_API_SOURCE=alphavantage

# Retry Configuration
RETRY_ENABLED=false
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY_MS=1000
RETRY_MAX_DELAY_MS=10000

# Timeout Configuration
API_TIMEOUT_MS=30000
FINNHUB_TIMEOUT_MS=
ALPHAVANTAGE_TIMEOUT_MS=

# Circuit Breaker Configuration
CIRCUIT_BREAKER_ENABLED=false
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=30000
CIRCUIT_BREAKER_HALF_OPEN_ATTEMPTS=1

# Key Rotation Configuration
# KEY_ROTATION_ENABLED is automatically set to true when comma-separated keys are detected
# You can override this by setting it explicitly
KEY_ROTATION_ENABLED=false
KEY_ROTATION_RESET_WINDOW_MS=3600000

# Smart Source Selection - Custom Priority Overrides
# Override the default source priority for specific tools
# Format: comma-separated list of sources in order of preference
# Available sources: finnhub, alphavantage, twelvedata, tiingo, sina, eastmoney
# 
# Default priorities (if not overridden):
#   get_stock_quote: finnhub, twelvedata, tiingo, alphavantage
#   get_stock_candles: twelvedata, finnhub, tiingo
#   get_technical_indicator: twelvedata, alphavantage
#   get_daily_prices: tiingo, alphavantage, twelvedata
#   get_news: tiingo, finnhub
#   get_quote: twelvedata, tiingo, alphavantage
#   get_company_overview: tiingo, alphavantage
#
# Note: For Chinese A-shares (symbols ending in .SH, .SZ, .BJ), 
# sources are automatically filtered to sina, eastmoney only.
#
# Example overrides (uncomment to use):
# SOURCE_PRIORITY_GET_STOCK_QUOTE=alphavantage,finnhub,twelvedata
# SOURCE_PRIORITY_GET_DAILY_PRICES=alphavantage,tiingo
# SOURCE_PRIORITY_GET_NEWS=finnhub,tiingo

# ============================================================
# Chinese A-Share Data Sources (Sina, East Money)
# ============================================================
# These sources are automatically used for Chinese stocks.
# No API keys required - they use free public APIs.
# Rate limiting is IP-based, controlled by request intervals.

# Request interval between API calls (milliseconds)
# Increase if you experience IP-based rate limiting
SINA_REQUEST_INTERVAL_MS=200
EASTMONEY_REQUEST_INTERVAL_MS=200

# Proxy Pool for Chinese Sources (optional)
# Use comma-separated proxy URLs for IP rotation to avoid rate limits
# Format: http://host:port or http://user:pass@host:port
# PROXY_POOL=http://proxy1:8080,http://proxy2:8080,http://proxy3:8080

# Proxy rotation strategy: round-robin, random, or weighted
# PROXY_ROTATION_STRATEGY=round-robin

# Cooldown time for failed proxies (milliseconds)
# PROXY_FAILURE_COOLDOWN_MS=300000

# Override market source mapping (optional)
# By default: SH/SZ/BJ -> sina,eastmoney; US -> finnhub,twelvedata,tiingo,alphavantage
# MARKET_SOURCES_SH=sina,eastmoney
# MARKET_SOURCES_SZ=sina,eastmoney
# MARKET_SOURCES_HK=sina,finnhub,twelvedata
